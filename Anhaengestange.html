<html>
<head>
<title>Anhaengestange</title>
<meta charset="utf-8"/>
<body>
<h1<Anhaengestange</h1>
<svg style="border:solid" width="100%" height="400" fill="none" viewBox="-200 -200 1800 400">
<path id="path1" d="M0,0L1350,91" stroke="blue"/>
<path id="path2" d="M0,0L1350,191" stroke="orange"/>
<path id="path3" d="M0,0L1350,291" stroke="brown"/>
  </svg>

<div id="Logfile" style="white-space:pre; font-family:Courier,Monospace; font-size:150%">
  </div>
<div id="Ausgabe">
  </div>

<script src="INVERT.js" type="text/javascript"></script>

<script>
var Logtext="Anhaengestange\n\n";
var cosgamma=(7*7+8*8-5*5)/2/7/8;
var cneu=Math.sqrt(4*4+6*6-2*4*6*cosgamma);
Logtext=Logtext+"cosgamma="+cosgamma+"\ncneu="+cneu+"\n\n";

function rad(grad) { return grad/180*Math.PI }
function grad(rad) { return rad*180/Math.PI }
function spunk(A) { return "L"+(A[0])+","+(-A[1]) }

var A1=[-Math.sin(rad(16.5))*145,-Math.cos(rad(16.5))*145+20];
var A2=[0,-145+20];
var A3=[-A1[0],A1[1]];
Logtext=Logtext+"A1="+A1+"\n";
Logtext=Logtext+"A2="+A2+"\n";
Logtext=Logtext+"A3="+A3+"\n";
var R2=97.445446;
var Q1=[1335+Math.sin(rad(25))*R2,-Math.cos(rad(25))*R2];
var Q2=[1335+0,-R2];
var Q3=[1335-Math.sin(rad(25))*R2,Q1[1]];
Logtext=Logtext+"Q1="+Q1+"\n";
Logtext=Logtext+"Q2="+Q2+"\n";
Logtext=Logtext+"Q3="+Q3+"\n";

function BestimmeCaus(A,B,a,b) {
  var alpha=Math.atan2(B[1]-A[1],B[0]-A[0]);
  var c=Math.sqrt((B[1]-A[1])**2+(B[0]-A[0])**2);
  var beta=Math.acos((b*b+c*c-a*a)/2/b/c);
  var gamma=alpha+beta;
  var C=[A[0]+b*Math.cos(gamma),A[1]+b*Math.sin(gamma)];
//  return a+" "+b+" "+c+" "+grad(alpha)+" "+grad(beta)+" "+grad(gamma)+" "+C;
  return C;
  }

var X2=1335;
var Y2=97.445446;
Y2=90;
Logtext=Logtext+"X2="+X2+"\n";
Logtext=Logtext+"Y2="+Y2+"\n";

var C1=BestimmeCaus(Q1,A1,Y2,X2);
var C2=BestimmeCaus(Q2,A2,Y2,X2);
var C3=BestimmeCaus(Q3,A3,Y2,X2);
Logtext=Logtext+"C1="+C1+"\n";
Logtext=Logtext+"C2="+C2+"\n";
Logtext=Logtext+"C3="+C3+"\n";

var R1=258.13;
var X1=1373;
var Y1=70;
R1=258.24345390919314;
X1=1372.7700420359224;
Y1=79.75964448357098;
R1=259.26508248828185;
X1=1375.0198939256632;
Y1=74.1115158590801;
//dgesamt=0.0552687903346545
//R2=97.445446;
//X2=1335;
//Y2=90;
R1=258.20391498015636;
X1=1374.8412681578366;
Y1=73.61741275168276;
//dgesamt=0.04723470121525537;



var P1,P2,P3,B1,B2,B3,delta1,delta2,delta3,d1,d2,d3,dges;


function allePunkte(R1,X1,Y1) {
  P1=[1335-Math.sin(rad(25))*R1,Math.cos(rad(25))*R1];
  P2=[1335+0,R1];
  P3=[1335+Math.sin(rad(25))*R1,P1[1]];
  //Logtext=Logtext+"P1="+P1+"\n";
  //Logtext=Logtext+"P2="+P2+"\n";
  //Logtext=Logtext+"P3="+P3+"\n";
  B1=BestimmeCaus(A1,P1,X1,Y1);
  B2=BestimmeCaus(A2,P2,X1,Y1);
  B3=BestimmeCaus(A3,P3,X1,Y1);
  //Logtext=Logtext+"B1="+B1+"\n";
  //Logtext=Logtext+"B2="+B2+"\n";
  //Logtext=Logtext+"B3="+B3+"\n";
  
  delta1=Math.atan2(B1[1]-C1[1],B1[0]-C1[0])-Math.atan2(B1[1]-A1[1],B1[0]-A1[0]);
  delta2=Math.atan2(B2[1]-C2[1],B2[0]-C2[0])-Math.atan2(B2[1]-A2[1],B2[0]-A2[0]);
  delta3=Math.atan2(B3[1]-C3[1],B3[0]-C3[0])-Math.atan2(B3[1]-A3[1],B3[0]-A3[0]);
  d1=Math.sin(delta1)*Math.sqrt((B1[1]-A1[1])**2+(B1[0]-A1[0])**2);
  d2=Math.sin(delta2)*Math.sqrt((B2[1]-A2[1])**2+(B2[0]-A2[0])**2);
  d3=Math.sin(delta3)*Math.sqrt((B3[1]-A3[1])**2+(B3[0]-A3[0])**2);
  dges=d1*d1+d2*d2+d3*d3;
/*  Logtext=Logtext+"d1="+d1+"\n";
  Logtext=Logtext+"d2="+d2+"\n";
  Logtext=Logtext+"d3="+d3+"\n";
  Logtext=Logtext+"dges="+dges+"\n";*/
  return dges;
  }

var dgesamt,gradient;
var del=0.1;
var eps=0.01;
for (var nr=0;nr<200;nr++) {
  //Logtext=Logtext+"nr="+nr+"\n";
  dgesamt=allePunkte(R1,X1,Y1);
  gradient=[
    (allePunkte(R1+del,X1,Y1)-dgesamt)/del,
    (allePunkte(R1,X1+del,Y1)-dgesamt)/del,
    (allePunkte(R1,X1,Y1+del)-dgesamt)/del
    ];
  R1=R1-gradient[0]*eps;
  X1=X1-gradient[1]*eps;
  Y1=Y1-gradient[2]*eps;
  }

  Logtext=Logtext+"gradient="+gradient+"\n";
  Logtext=Logtext+"//R2="+R2+";\n";
  Logtext=Logtext+"//X2="+X2+";\n";
  Logtext=Logtext+"//Y2="+Y2+";\n";
  Logtext=Logtext+"R1="+R1+";\n";
  Logtext=Logtext+"X1="+X1+";\n";
  Logtext=Logtext+"Y1="+Y1+";\n";
  Logtext=Logtext+"//dgesamt="+dgesamt+";\n\n";

document.getElementById("Logfile").innerHTML=Logtext;

  var path1="M1335,0"+spunk(P1)+spunk(B1)+spunk(A1)+"h5h-10h5v5v-10v5"+spunk(C1)+spunk(Q1)+"Z";
path2="M1335,0"+spunk(P2)+spunk(B2)+spunk(A2)+"l4,4l-8,-8l4,4l4,-4l-8,8l4,-4"+spunk(C2)+spunk(Q2)+"Z";
path3="M1335,0"+spunk(P3)+spunk(B3)+spunk(A3)+"h5h-10h5v5v-10v5"+spunk(C3)+spunk(Q3)+"Z";
  //alert(path1);

  document.getElementById("path1").setAttribute("d",path1);
  document.getElementById("path2").setAttribute("d",path2);
  document.getElementById("path3").setAttribute("d",path3);

  </script>
  </body>
  </html>
