<html>
<head>
  <title>Plauener Modelleisenbahn</title>
  <meta charset="utf-8"/>
  <style type="text/css"> 
</style> 
<script type="application/ecmascript">
function Logfile(Logtext) {
  var Logfile=document.getElementById("Logfile");
  if (Logfile.hasChildNodes()==false) Logfile.appendChild(document.createTextNode(" "));
  Logfile.firstChild.nodeValue=Logtext;
  }
function SprichDE(was) {
  var worte = new SpeechSynthesisUtterance(was);
  worte.lang = "de-DE";
  window.speechSynthesis.speak(worte);
  }
function SprichFR(was) {
  var worte = new SpeechSynthesisUtterance(was);
  worte.lang = "fr-FR";
  window.speechSynthesis.speak(worte);
  }
function init() {
  websocket = new WebSocket("ws:192.168.1.123:1880/ws/gpio"); 
  websocket.onopen = function() {
    Logfile("CONNECTED");
    }; 
  websocket.onclose = function() {
    Logfile("DISCONNECTED");
    }; 
  websocket.onmessage = function() {
    SprichDE("Vorsicht am Gleis 1, es fährt ein der Zug aus Chemnitz");
    SprichFR("Attention à la voie 1, arrivée du train de Chemnitz");
    Logfile("event.data="+event.data);
    }; 
  websocket.onerror = function() { Logfile("onerror="+event.data) };
  Logfile("Websocket gestartet");
  }
  </script>
<body onload="init()">
  letzte Aktion: <span id="Logfile">Seite geladen</span>
  </body>
  </html>
