<html>
<head>
  <title>Plauener Modelleisenbahn</title>
  <meta charset="utf-8"/>
  <style type="text/css"> 
    .Licht_an {
      background-color: yellow;
      font-size: 200%
      }
    .Licht_aus {
      font-size: 200%
      }
    </style> 
<script type="application/ecmascript">
var eventnr=0;
function Logfile(Logtext) {
  var Logfile=document.getElementById("Logfile");
  if (Logfile.hasChildNodes()==false) Logfile.appendChild(document.createTextNode(" "));
  Logfile.firstChild.nodeValue=Logtext;
  }
function SprichDE(was) {
  var worte = new SpeechSynthesisUtterance(was);
  worte.lang = "de-DE";
  window.speechSynthesis.speak(worte);
  }
function SprichFR(was) {
  var worte = new SpeechSynthesisUtterance(was);
  worte.lang = "fr-FR";
  window.speechSynthesis.speak(worte);
  }
function init() {
  //websocket = new WebSocket("ws:192.168.1.123:1880/ws/gpio"); 
  websocket = new WebSocket("ws:192.168.2.100:1880/ws/gpio"); 
  //websocket = new WebSocket("ws:192.168.43.243:1880/ws/gpio"); 
  websocket.onopen = function() {
    Logfile("CONNECTED");
    }; 
  websocket.onclose = function() {
    Logfile("DISCONNECTED");
    }; 
  websocket.onmessage = function() {
    eventnr=eventnr+1;
    Logfile("event.data="+event.data);
    SprichDE("Vorsicht am Gleis 1, es kommt ein Zug aus Chemnitz");
    //SprichFR("Attention à la voie 1, arrivée du train de Chemnitz");
    Logfile("event.data="+event.data+" durch "+eventnr);
    }; 
  websocket.onerror = function() { Logfile("onerror="+event.data) };
  Logfile("Websocket gestartet");
  }
  </script>
<body onload="init()">
  letzte Aktion: <span id="Logfile">Seite geladen</span>
<p>
Licht
Waldcafe 
<button class="Licht_an" onclick='websocket.send("5");Logfile("Licht ein")'>ein</button>
<button class="Licht_aus" onclick='websocket.send("0");Logfile("Licht aus")'>aus</button>
  </body>
  </html>
