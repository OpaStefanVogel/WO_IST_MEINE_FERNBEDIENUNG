<HTML>
  <HEAD>
  <META charset="utf-8"/>
  <TITLE>Snooker</TITLE>

  <STYLE type="text/css"> 
BODY { font-family: Courier,monospace; font-size:300%}
PARTIE { display: flex; flex-direction:column; align-items:stretch; text-align:center}
SPIELSTAND { font-size:300%; border:solid;}
TEAMS { display: flex; flex-direction: row; align-items:center}
TEAM  { display: flex; flex-direction: column; flex-basis:50%;align-items:center;}
SPIELER { border:solid; padding:20px; margin:10px;}
TEXT { align-item:center}
BUTTONS { display: flex; flex-direction: column; align-items:center}
BUTT { flex-basis:50%; border:solid}

    </STYLE> 

  <SCRIPT>
  websocket = new WebSocket("ws://192.168.1.107:1880/ws/snooker"); 
  websocket.onmessage = function() {
    var w;
    w=event.data;
    //alert(w);
    du_bist_dran(w);
    }; 

var dran_ist="Team1/Spieler1"
function du_bist_dran(Spieler) {
  document.getElementById(dran_ist).setAttribute("style","background-color:white");
  document.getElementById(dran_ist).parentNode.setAttribute("style","background-color:white");
  if (Spieler!=undefined) { dran_ist=Spieler } else {
    dran_ist=event.target.getAttribute("id");
    websocket.send([dran_ist]);
    };
  document.getElementById(dran_ist).setAttribute("style","background-color:red");
  document.getElementById(dran_ist).parentNode.setAttribute("style","background-color:yellow");
  //alert(dran_ist);
  }
</SCRIPT>
  </HEAD>
<BODY onload="">
<PARTIE>
<SPIELSTAND>0:0</SPIELSTAND>
<TEAMS onclick="du_bist_dran()">
  <TEAM>Team 1
    <SPIELER id="Team1/Spieler1">ich</SPIELER>
    <SPIELER id="Team1/Spieler2">er</SPIELER>
    <SPIELER id="Team1/Spieler3">I</SPIELER>
    <SPIELER id="Team1/Spieler4">he</SPIELER>
    <SPIELER id="Team1/Spieler5">je</SPIELER>
    <SPIELER id="Team1/Spieler6">il</SPIELER>
    </TEAM>
  <TEAM>Team 2
    <SPIELER id="Team2/Spieler1">du</SPIELER>
    <SPIELER id="Team2/Spieler2">sie</SPIELER>
    <SPIELER id="Team2/Spieler3">you</SPIELER>
    <SPIELER id="Team2/Spieler4">she</SPIELER>
    <SPIELER id="Team2/Spieler5">tu</SPIELER>
    <SPIELER id="Team2/Spieler6">elle</SPIELER>
  </TEAM>
    </TEAMS>
    <BUTT ontouchstart="du_bist_dran('Team1/Spieler1');confirm('zurück auf 0:0?');websocket.send('restart')">Restart</BUTT>
  <PARTIE>
<BUTTON onclick="websocket.close()">Websocket close</BUTTON>

<!--
var ids = context.get('ids')||[99];
var ret = [[]];
var ind = ids.indexOf(msg._session.id);
if (ind==-1) {ids.push(msg._session.id)};
for (i=0;i<ids.length;i++) {
  var msg1={"payload":msg.payload, "_session": { "type": "websocket", "id": ids[i] }}
  ret[0].push(msg1);
  }
context.set('ids',ids);
node.status({fill:"green",shape:"dot",text:ids.length});
return ret;


.. bei neu hinzuschalten aktuellen Stand holen
.. Kleingedrucktes
ok node function mit ids.length
.. ids auf aktuelle beschränken
.. alle Fenster aktualisieren
merk:
.. opera classic macht nur buttons mit onclick
.. gh-pages jetzt vorneweg
xWtH8a1QzQ0 das ende der erde
var count = context.get('count')||0;
count += 1;
// store the value back
context.set('count',count);
// make it part of the outgoing msg object
msg.count = count;
-->
  </BODY></HTML>
